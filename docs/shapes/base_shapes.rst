Base Shapes
-----------

Базовые и вспомогательные фигуры.

AbstractShape
=============

Базовый абстрактный класс для фигуры. Содержит общие для всех данные.


Параметры
*********

id
    Уникальное имя фигуры. Нельзя в одном шаблоне создавать две фигуры с одинаковым именем.
    Это имя используется для ссылки на конкретную фигуру и её параметры.

parent
    Ссылка на родительский объект. Если `parent` не указан то им является исходная картинка.

z_index
    Параметр отвечает за порядок отрисовки элементов. Например, родительский объект должен быть создан в шаблоне
    ДО указания его в качестве родителя. В таком случае все дочерние объекты будут отрисованы поверх родительского.
    Изменение индекса позволит управлять этой очерёдностью.

enabled
    Параметр, определяющий рендерится ли фигура. Если `enabled=false` то элемент будет отсутствовать, но при этом ячейка
    сетки всё равно будет занята и эта фигура может быть парентом для других фигур.

skip
    Пропуск элемента в сетке. В отличие от `enabled` ячейка сетки не будет занята, произойдет его полное
    удаление со смещением следующего элемента.
    Лучше всего подходит для вариативных элементов. То есть в двух соседних элементах в параметр `skip` можно записать
    противоположные условия и будет виден либо один либо другой.

.. code-block:: json

   "variables": {
       "show_alt": true
   },
   "shapes": [
       {"type": "label", "text": "Main Text", "skip": "$show_alt"},
       {"type": "label", "text": "Alt Text",  "skip": "=not $show_alt"}
   ]

BaseShape
=========

    `inherited (AbstractShape)`

Базовая форма представляет объект, участвующий в рендере. Он либо видим на рендере, либо используется как
невидимый родительский объект.

local_resource_paths
    Пути для поиска файлов ресурсов.

get_resource_func
    Функция для поиска файла ресурса.

Параметры
*********

x
    Координата X относительно родительского объекта

y
    Координата Y относительно родительского объекта

width
    Ширина формы

height
    Высота формы

align_v
    Выравнивание по вертикали относительно родителя

align_h
    Выравнивание по горизонтали относительно родителя

color
    Основной цвет. Можно указать в следующих форматах:

- **RGB (0-255):** ``[100, 100, 0]``

- **RGBA (0-255):** ``[255, 0, 0, 100]``

- **HEX:** ``#fff444``

- **COLOR NAME:** ``"red"``

Список имён цветов можно посмотреть в исходниках Pillow, например `здесь <https://github.com/python-pillow/Pillow/blob/master/src/PIL/ImageColor.py#L148>`_

rotate
    Угол поворота в градусах

rotation_pivot
    Центр поворота. **Этот парамтер всегда должен быть списком из двух элементов**.
    Если не указать центр поворота то по умолчанию центром будет являться геометрический центр объекта.

debug_border_color
    Цвет дебаг-обводки

debug_parent_border_color
    Цвет дебаг-обводки родительского объекта

debug_border_width
    Толщина дебаг-обводки

debug_parent_border_width
    Толщина дебаг-обводки родительского объекта


gradient
    Заливка градиентом. Поддерживается линейный и радиальный градиенты

Поля
****

top
    Верхняя граница в глобальных координатах

bottom
    Нижняя граница в глобальных координатах

left
    Левая граница в глобальных координатах

right
    Правая граница в глобальных координатах

EmptyShape
==========

    `inherited (BaseShape)`

Пустая форма, используется как заглушка для пустого места или как невидимый парент.


RootParent
==========

    `inherited (BaseShape)`

Обёртка для исходной картинки, чтобы она работала как родительский объект.


Глобальный контекст
-------------------

В процессе ресолва экспрешенов доступны все built-in функции python, а такне несколько объектов импортированных из библиотек.


random
  Функция `random.random`

uniform
  Функция `random.uniform`

randint
  Функция `random.randint`

random_seed
  Функция `random.seed`

math
  Модуль `math`

Пример

.. code-block:: json
  {
    "type": "label", "text": "`=math.sin($frame)`"
  }